<!DOCTYPE html>
<html lang="en" xmlns:webbits="http://webbits.org/webbits"
	webbits:depends="Bootstrap,Widgets,FreeMarker">
<body>
<div class="wrapper">
<header webbits:id="com.jadaptive.app.ui.Header"></header>
<main class="container my-auto">
   <div id="uploadForm" class="row justify-content-center">
         <div class="col-10">
            <div class="card">
         	   	<div class="card-header">Public Upload</div>
       			<div class="card-body">		
         	<form enctype="multipart/form-data" action="/upload/public/${view.shortCode}" method="POST">
      
		    <div class="form-group">
		       <label class="col-form-label" for="name">Your Name</label><input type="text" name="name">
		       <small class="form-text text-muted">Please enter your name so we know whom the file is from.</small>
		    </div>
		    <div class="form-group">
		       <label class="col-form-label" for="email">Your Email</label><input type="email" name="email">
		       <small class="form-text text-muted">Please enter your email so that we can contact you if required.</small>
		    </div>	
		    <div class="form-group">
		       <input type="checkbox" name="receipt"><span>Email me a receipt when the upload has completed</span>
		    </div>	
		    
		    
		    <div class="col-12 dropzone text-muted text-center p-3 my-3" style="border: 1px dashed">
		    	<div class="dropzoneClick"><i class="fas fa-cloud-upload-alt fa-5x p-1"></i></div>
		    	<small>To upload multiple files drag and drop them here or click in the area to select a file from your computer.</small>
		    </div>	  
		    <div class="jfiles" style="display: none">
		    	<table class="table">
		    		<thead>
		    			<tr>
			    			<th class="col-4">Filename</th>
			    			<th class="col-2">Size</th>
			    			<th class="col-5"></th>
			    			<th class="col-1"></th>
		    			</tr>
		    		</thead>
		    		<tbody class="fileInputs">
		    			<tr class="ready">
			    			<td class="filename"></td>
			    			<td class="size"></td>
			    			<td class="uploadProgress">
			    				<div class="progress my-auto" style="display: none">
 									<div class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
			    			</td>
			    			<td class="actions text-right">
			    				<i class="far fa-trash-alt ready"></i>
			    				
			    			</td>
		    			</tr>
		    		</tbody>
		    	</table>
		    	<div>
		    		<input class="file-input" type="file" name="file" style="display: none;" />
		    	</div>
		    </div> 
    		<div class="form-group text-right">
    			
    			<button class="btn btn-primary">Upload</button>
    		</div>
		</form>
		</div>
         </div>
         </div>
   </div>
</main>
</div>
<script type="text/javascript">

	Object.defineProperty(Number.prototype,'fileSize',{value:function(a,b,c,d){
		 return (a=a?[1e3,'k','B']:[1024,'K','iB'],b=Math,c=b.log,
		 d=c(this)/c(a[0])|0,this/b.pow(a[0],d)).toFixed(2)
		 +' '+(d?(a[1]+'MGTPEZY')[--d]+a[2]:'Bytes');
		},writable:false,enumerable:false});
	
	$(document).ready(function() {
		
		$('.dropzoneClick').click(function(e) {
			$('.file-input').last().trigger('click');
		});
		
		$(document).on('change', '.file-input', function(e) {
			debugger;
			var row = $(this).parents('.jfiles').find('tr').last();
			row.parent().append(row.clone());
			var fileInput = $('.file-input').last();
			fileInput.parent().append('<input class="file-input" type="file" name="file" style="display: none;" />');
			row.find(".filename").text(fileInput[0].files[0].name);
			row.find(".size").text((fileInput[0].files[0].size).fileSize(1));
			row.show();
			
			$('.jfiles').show();
		});
	});
</script>
<footer webbits:id="com.jadaptive.app.ui.Footer"></footer>
</body>
</html>