<!DOCTYPE html>
<html lang="en" xmlns:jad="http://jadaptive.com/jadaptive">
<body>
<div class="wrapper">
<header jad:id="header"></header>
<main class="container my-auto">
   <div id="uploadForm" class="row justify-content-center">
         <div class="col-10">
            <div class="card">
         	   	<div class="card-header">Public Upload</div>
       			<div class="card-body">		
      	<div class="col-12" id="feedback">
      	
      	</div>
	    <div class="row"> 
          <label for="name" class="form-label" jad:bundle="virtualFolder" jad:i18n="publicUpload.user.name">Name</label> 
          <input id="name" name="name" class="form-control" value="" type="text" required="true"> 
          <small class="form-text text-muted" jad:bundle="virtualFolder" jad:i18n="publicUpload.user.desc"></small> 
         </div>	
	    <div class="row"> 
          <label for="email" class="form-label" jad:bundle="virtualFolder" jad:i18n="publicUpload.email.name">Email</label> 
          <input id="email" name="email" class="form-control" value="" type="text" required="true"> 
          <small class="form-text text-muted" jad:bundle="virtualFolder" jad:i18n="publicUpload.email.desc"></small> 
         </div>
<!-- 	    <div class="row"> -->
<!-- 	       <input type="checkbox" name="receipt"><span>Email me a receipt when the upload has completed</span> -->
<!-- 	    </div>	 -->
	    <div id="uploadHolder" jad:id="uploadWidget" class="col-12 mb-3"></div>

		</div>
         </div>
         </div>
   </div>
</main>
</div>
<footer jad:id="footer"></footer>
<script type="text/javascript">

	$(function() {
		UploadWidget.init('/upload/public/${page.shortCode}', '/app/ui/public-upload/${page.shortCode}', "#feedback", function(fd) {
			
			var name = $('#name').val();
			var email = $('#email').val();
			
			if(name.trim() === '' || email.trim() === '') {
				$('#feedback').append('<p class="alert alert-danger"><i class="far fa-exclamation-circle"></i> Please provide your name and email address to upload the file.</p>');
			}
			fd.append("name", name);
			fd.append("email", email);
		});
	});
</script>
</body>
</html>